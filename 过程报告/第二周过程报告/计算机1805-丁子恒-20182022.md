<div align='center' ><h1 style="text-align:center">第二次过程报告 </h1></div>
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;————计算机1805丁子恒


# 一、第四次上机（7.4）
## 1、小组讨论
 * 当前遇到的主要问题是语法语义分析进展较为不顺利
 * STL运用不太熟练，导致代码数据结构出现问题，需要尽快调试
 * 周末的进展可能不会太快，主要原因是
   - 部分小组成员周末有大创答辩
   - 周二有数字逻辑与数字系统课设的阶段性验收，大家需要赶一赶这个课设的进度
## 2、任务分配
 * 我开始协助张钊源、罗巍耀同学完成语法分析的部分
 * 目前有多位同学在同时进行语法语义分析和中间代码生成部分，我负责该部分的调试工作
# 二、第五次上机（7.6）
## 1、小组讨论 
 * 今天向老师演示程序功能时并不顺利，语法分析、语义分析、中间代码生成部分仍有未解决的部分
 * 目前进度较为缓慢，希望在下一次上机前至少能完成语法分析、语义分析、中间代码生成
 * 我开始调试修改这部分代码，其他组员着手开始编写优化和目标代码生成的部分
## 2、任务完成情况
 * 语法分析、语义分析、中间代码生成顺利调试完毕
 * 目前可对源程序文件进行分析后，打印出完整的Token序列、符号表、四元式序列
 * 这部分bug太多了orz
## 3、文法设计
### 文法总体采用类似c语言的方式，大部分关键字用法相同，主要包括如下部分
 * 程序在名为main的函数中开始运行，可以识别用户自定义函数
   - 不过真的只是识别而已，只能识别没法调用
 * 函数内部结构如下
   ```
     返回类型 函数名(参数类型1 参数1，参数类型2 参数2......)
     {
         变量定义;
         内容(赋值、循环、条件语句等等);
     }
   ```
   - 注意函数内部的变量定义必须在函数的开头处，即第一条内容语句之前。
 * 变量定义格式如下
   ```
     基本类型：
        int(整数型),real(实数型),char(字符型)
     复杂类型：
        数组定义：类型 数组名[常量];，如int a[10];
        结构体定义：struct 结构体名 {类型1 变量1;类型2 变量2;......};
                    struct 已定义结构体名 新结构体名;
   ```
   - 只支持使用基本类型定义数组，所以二维数组是不支持的
  * 内容语句如下
    ```
    赋值语句
         = （同c语言）
    算术与逻辑表达式
         +-*/四则运算
         &&  ||  ！ 与或非逻辑运算
         & | ~  操作数之间进行取逻辑与或非运算
         .  结构体使用.来进行对成员的访问
    函数表达式
         函数名(参数1,参数2......);
    if语句
         if(条件){语句;}		
         或if(条件){语句;}else{语句;}
    while语句
         while(条件){语句;}
    输出语句
         cout 基本类型变量;
    ```
    - 函数表达式仅在语法层面上实现识别，并进行正确地填写符号表，但是不能插入语义动作以及进行后续操作
   
# 三、第六次上机（7.8）
## 1、组内讨论
 * 本次上机时向老师展示了目前的成果，词法语法语义分析以及四元式序列打印均正确，完成了基本的任务
 * 优化和目标代码生成部分正在同步推进中，力争尽快完成
 * 我开始协助编写并调试修改优化的部分
## 2、任务完成情况
 * 截止到书写本次报告，基本块划分已经完成并通过测试
 * 优化部分即将完成，采用的是DAG图优化的方式
## 3、难点
 * DAG图优化手写起来很方便，但是转换成代码是真的不方便
 * 使用正常的图结构会过于复杂且不直观，目前采用线性结构管理DAG图
# 五、总结
## 第二阶段评价
 * 由于课设叠加，前期进度缓慢等原因，这一阶段的进度有些偏慢，编译器可能没法达到预期的标准，有些地方会简化处理
 * 这一部分内容的编写难度有了明显的提升，不过在编写完成后无论是编译知识点的掌握，还是代码编写水平也都有了明显的提升
 * 编写速度加快造成程序bug过多，给后期调试带来了很大的麻烦
## 体会
 * 编译器编写的难度确实超出了我们的想象，对细节的处理其实是编写中最困难的地方
 * 即使是实现类似c语言那样的文法也是相当困难的，所以我们的文法可能不够灵活，不支持在其他内容中定义变量
 * 函数的调用我们没能采取有效方法进行处理，不过我们的语法框架是可以识别并完成函数定义与调用的，<br>
   所以这方面语义动作的添加和活动记录的管理，我们可以在日后去逐渐完善，同时增加更多的语法、功能
 
